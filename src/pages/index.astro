---
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout title="Secret Access">
	<div
		class="flex flex-col items-center justify-center min-h-[80vh] text-center space-y-8 animate-fade-in"
	>
		<div
			class="relative group w-full max-w-4xl transition-transform duration-300 hover:scale-[1.01]"
		>
			<div
				class="absolute -inset-1 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-1000 group-hover:duration-200"
			>
			</div>
			<img
				src="/phin2.jpg"
				alt="Yellow Truck"
				class="relative w-full h-auto rounded-xl shadow-2xl border-2 border-slate-700/50"
			/>
		</div>

		<form
			id="secret-form"
			class="w-full max-w-xs flex flex-col gap-5 relative z-10"
		>
			<div class="flex flex-col gap-2 group">
				<label
					for="secret-code"
					class="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-orange-300 uppercase tracking-wider"
				>
					Enter Secret Code
				</label>
				<div class="relative">
					<input
						type="text"
						id="secret-code"
						name="code"
						required
						autocomplete="off"
						class="w-full px-4 py-3 bg-slate-900/80 border border-slate-700 rounded-lg text-white text-center text-lg focus:outline-none focus:border-yellow-500 focus:ring-1 focus:ring-yellow-500 placeholder-slate-600 transition-all duration-300 backdrop-blur-sm"
						placeholder="••••••••••••"
					/>
				</div>
			</div>

			<button
				type="submit"
				class="px-8 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-slate-900 font-extrabold rounded-lg shadow-lg hover:shadow-yellow-500/20 transition-all duration-300 transform hover:-translate-y-0.5 active:translate-y-0"
			>
				SUBMIT
			</button>

			<p
				id="error-message"
				class="text-red-400 font-medium text-sm h-5 opacity-0 transition-opacity duration-200"
			>
				Incorrect code. Try again.
			</p>
		</form>
	</div>

	<script lang="ts">
		const form = document.getElementById("secret-form");
		const input = document.getElementById("secret-code");
		const errorMessage = document.getElementById("error-message");

		const REDIRECTS = {
			gonkerlives: "/gonkerlives",
			cornhole: "/cornhole",
			catpee: "/pauls",
			dragon: "/beas-story",
			theboss: "/phin",
			renters: "/peyton",
		};

		form?.addEventListener("submit", (e) => {
			e.preventDefault();
			if (!input || !(input instanceof HTMLInputElement)) return;

			const code = input.value.trim().toLowerCase();

			if (code in REDIRECTS) {
				// Add a small delay for animation effect
				const btn = form.querySelector("button");
				if (btn) {
					btn.innerHTML = "ACCESSING...";
					btn.classList.add("opacity-90", "cursor-wait");
				}
				setTimeout(() => {
					window.location.href = REDIRECTS[code];
				}, 600);
			} else {
				errorMessage?.classList.remove("opacity-0");
				input.classList.add("border-red-500", "animate-shake");
				input.value = "";
				input.focus();

				setTimeout(() => {
					input.classList.remove("border-red-500", "animate-shake");
				}, 500);
			}
		});

		input?.addEventListener("input", () => {
			errorMessage?.classList.add("opacity-0");
		});
	</script>

	<style>
		@keyframes shake {
			0%,
			100% {
				transform: translateX(0);
			}
			25% {
				transform: translateX(-5px);
			}
			75% {
				transform: translateX(5px);
			}
		}
		.animate-shake {
			animation: shake 0.2s ease-in-out 0s 2;
		}
	</style>
</BaseLayout>
